如果需要检查llm输出过程中是否存在死循环，该如何实现？
此场景下llm生成采用流式生成。
典型的死循环场景为：
1.思考段(reasoning部分。可以通过流式生成的事件提取边界)部分出现部分文本以完全相同的模式反复出现
2.思考段部分出现md有序列表格式的重复，文本内容以完全相同的模式反复出现，但标号不同。例如"1. A\n2. B\n 3. A\n4. B\n"
1-2一般遵循语义边界(中英文句号/分号/各类引号/换行转义符)
3.较短序列的循环。例如"...我需要思考思考思考[后面的省略，通常后面都是这样了]..."。这很多时候不局限于思考段部分
通常情况下tool-calling部分不可能死循环，1-2也仅出现于思考段部分

分析怎样设计。我目前的想法是从某一阈值开始统计(例如思考段达到2000字符)，统计到某一界限结束试探性统计(例如3000字符)【情况3除外，一般从阈值开始截取一段就能发现，例如可以考虑增加2100字符作为边界】，从开头开始截取未循环的最长序列[需要处理md的标号]。为了防止在后方出现，可以考虑在5000字符时再做一次检查
鉴于死循环一般格式完全一致，可以不需要把空格等标准化，也不需要模糊匹配(以免误判一些格式化生成内容)，只需要完整匹配即可判定为异常(唯一的例外就是md格式中的标号会递增)
需要设计一种方案，尽可能在减小性能开销的同时保证较高准确率，且降低误判率